<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DigitalOcean Space Viewer</title>
</head>
<body>
  <h1>DigitalOcean Space Viewer</h1>
  <div id="objects-list">
    <!-- Object list will be displayed here -->
  </div>

  <script>
    // Import the s3Client
    import { S3 } from "@aws-sdk/client-s3";

    const s3Client = new S3({
      forcePathStyle: false, // Configures to use subdomain/virtual calling format.
      endpoint: "https://nyc3.digitaloceanspaces.com",
      region: "us-east-1",
      credentials: {
        accessKeyId: process.env.SPACES_KEY,
        secretAccessKey: process.env.SPACES_SECRET
      }
    });

    // Function to fetch and display objects from the Space
    async function fetchObjects() {
      try {
        const { Contents } = await s3Client.listObjects({ Bucket: 'your-bucket-name' });
        const objectsList = document.getElementById('objects-list');
        objectsList.innerHTML = '<h2>Objects in the Space:</h2>';
        Contents.forEach(object => {
          const objectElement = document.createElement('div');
          objectElement.textContent = object.Key;
          objectsList.appendChild(objectElement);
        });
      } catch (error) {
        console.error('Error fetching objects:', error);
      }
    }

    // Fetch objects when the page loads
    window.onload = fetchObjects;
  </script>
</body>
</html>
